# 6월 3일 Git 세션

디자인 쪽에서도 버전 컨트롤을 도입하고 있는데, git 처럼 탄탄한 것은 없다

현재 개발 팀 프로젝트에서 버전관리와 클라우드 저장소는 필수 불가결한 기술이다.

git과 github

이것 없이 개발하는 것은 세이브 없이 게임을 하는 것. 

**심화 기능 (rebase, cherry-pick, reset ..) → 동작원리 알고 쓰면 좋다.**

**커리어 advice: 강의 촬영은 한번 해보기!!**

- 꼭 다 아는 게 아니라 아예 시니어 보다 주니어가 더 주니어에게 알려주는 게 더 나을 수도

**[Git GUI에 대해서]**

깃헙 데스크탑

깃 크라켄

소스트리

→ GUI 툴 쓰면 된다.

**이제 사실 ide에 내장된 gui 쓰면 된다.**

**[Master → Main 브랜치로의 전환]**

master 대신 **main이라는 이름을 바꾸자** 라는 이야기가 나왔다

master → slave 라는 노예제도 연상되기 때문에

**[Mac Tip]**

- RayCast → floating notes 라는 기능 추천!

**[라이센스에 대해서]**

라이센스 :  상업적으로 사용하면 안된다, 같은 것을 나타냄

- “해야할 것”과  “하지 말아야 할것”에 대한 약속

MIT 라이센스 : 상업적으로 이용해도 되는데, 문제 되어도 내 탓하지마.

- 내 코드로 사업해도 되는데 오류 발견되어도 나는 책임 없다.

⇒ 유료 서비스(회사)를 개발하는 곳에서는 라이브러리를 쓸 때 오픈소스의 라이센스를 잘 확인해야 한다.

[라이센스 관련 블로그 링크](https://flyingsquirrel.medium.com/github-license%EC%9D%98-%EC%A2%85%EB%A5%98%EC%99%80-%EB%82%98%EC%97%90%EA%B2%8C-%EB%A7%9E%EB%8A%94-%EB%9D%BC%EC%9D%B4%EC%84%A0%EC%8A%A4-%EC%84%A0%ED%83%9D%ED%95%98%EA%B8%B0-ae29925e8ff4)

**[Git 꿀팁]**

- `git clone <주소> .`  : **마지막에 점을 찍어주어야 현재 폴더에 내려 받는다. 안 찍으면 새 폴더 생성**
- `git  reflog` : **reset —hard 된 히스토리도 확인 가능하다**
- `git checkout` → `git switch` 로의 업데이트
    - `git checkout -b` → `git switch -c`

**[커밋 메세지 쓰면 안되는 것]**

- 아무 의미없는  e.g) feat: app.js 추가
- 보통 새 organization에 collaborator 추가해서 만듦.
- pull origin HEAD (현재 가리키는 로컬 브랜치) → fast-forward 방식으로 받아와 졌다..

**SVN** :  현재 상태를 알려면 모든 커밋을 다 알아야 한다.

**GIT** : 한치 앞만 계산하면 (이전 커밋) 되므로 가볍고 속도 빠르다

취준 기간이 너무 길지 않아도 된다..

다만 코드리뷰 많이 하든, 같이 일하는 사람이 2명 이상이든, 등등.. 

어디든 들어가도 좋다.

추천하는 것은 이력서 주구장창 → 5개이상 면접, 3개 붙고 비교 해보기.

내가 들고 있는 패를 가장 많이 가지는 것이 가장 현명한 방법.

released 된 토이 프로젝트가 있는 분들이 신입 개발자로서 좋은 부분. (사용자 적어도됨. 10~20명)

사용자와 숨을 쉰 iteration을 돌았다 ! → 면접에서 풀수 있는 썰이 많다.

**하나를 굵직하게 하는것이 중요 but 쉽지가 않다**

문제를 풀고 끝내는 것이 아니라 항상 page 같은 것을 쓰기.

디버깅 하는 것을 쓰기

문제 해결에 대한 끈기, 노하우등..

모든 은행이 망했으면 좋겠다… 돈과 관련된 이슈를..

핀테크 오면 금융 맥락을 알게 될지 않을까? → 아직도 잘 모름

보험을 했고 알뜰폰을 하고 있는데,  

백엔드 : 엄밀한 능력. 장애가 나면 critical → 금감원에 불려가야하는 이슈가 많다 → 꼼꼼, 끈기 있고, 파고 든다는 성향이 중요

---

브랜치 : 평행 세계 나누기

한 줄로 커밋을 쌓으면 둘이 겹친다. → 여러줄로 쌓으면 된다!

- 왜 같이 작업하려면 여러 줄로 커밋을 쌓아야 하나요?
- →한줄에서 작업하면 충돌이 날 수 있다. 똑같은 코드를 동시에 고칠 가능성이 있다.
- 그럼 n 줄로 쌓고 나중에 합치나요?
- → 네. 그럼 충돌이 나더라도 합치는 시점에 명시적으로 충돌 해결 할 수 있다.

브랜치를 가지라 생각하지말고 포인터라 생각하기

**[Fast-forward, Merge commit, Conflict의 차이점]**

![Untitled](img/fastforward%2Cmerge%2Cconflict.png)

**[Git Merge에 대해서]**

git에는 세 가지 머지가 가능하다

- merge commit
- squash merge
- rebase merge
1. **Merge Commit** 

`juno-junho` 브랜치가 있다고 하자.

`git switch -c step1`의 브랜치를 만들고 커밋 등 작업을 완료했다.

`git switch juno-junho` → `git merge step1` 하면 `juno-junho` 에 `step1`의 커밋을 합쳤다는 m 커밋이 추가되고 m 커밋은 2개의 parent를 가진다.

1. **squash merge**
- `git switch juno-junho` → `git merge --squash step1` → `git commit -m "message"` 를 통해서 step1 브랜치의 커밋들이 모두 삭제되고 commit history를 합쳐 깔끔하게 만들기 위해 사용된다.
1. **rebase** 
- `git switch step1` → `git rebase juno-junho` → `git checkout juno-junho` → `git merge step1`
- 브랜치 병합 시 merge commit 기록이 남지 않아 마치 하나의 브랜치에서 작업한 것처럼 보여진다.

[git merge 종류 블로그](https://velog.io/@injoon2019/Git-Merge-%EC%A2%85%EB%A5%98)

 **[브랜치 vs 포크]**

**브랜치**

- 하나의 원본 저장소에서 분기를 다룬다
- 편리한 점 : 하나의 원본 저장소에서 코드 커밋 이력을 편하게 볼 수 있다.
- 다수의 사용자가 다수의 브랜치를 만들면 관리 힘들다.

**포크 : 저장소 통째로 복사**

- 여러 원격저장소를 만들어 분기를 나눈다
- 원본저장소에 영을 미치지 않으므로 마음껏 코드 수정 할 수 있다.
- 원본저장소의 이력을 보려면 따로 주소를 추가해줘야한다.

→ opensource에서는 fork 방식 / team에서는 branch 방식을 많이 쓴다

opensource에서는 pull request template이 있다. 라이센스 추가하는 것 처럼 contribute template 추가해 주면 된다.

**opensource에 PR을 보낼때는 ‘contribution guideline’을 반드시 참고해야 한다.**

**[tip: 브랜치 관리하기]**

1. 보통 `feat/기능이름`으로 한 사람이 개발하는 기능 브랜치를 만든다 (혹은 `fix/버그이름`, `hotfix/급한버그`)
2. 작업이 끝나면 `dev` 혹은 `main` 브랜치로 PR을 보낸다.
3. `dev` 브랜치에서 큼지막한 작업이 모두 머지되면 `release` 혹은 `latest` 브랜치로 머지 시키고 이를 **실서버에 배포**한다.
4. 직업 커밋은 `feat` (or `fix`, `hotfix`) 브랜치에만 한다.
5. `dev` 나 `main`, `release` 브랜치에는 **직접 커밋하지 말고 머지만 한다.**

**토스는 main / feat밖에 없어 실시간으로 release 하는 편**

**[실무 사례와 함께 Git 정복하기]**

준호님! main 브랜치에 커밋이 잘못 푸쉬되었네요.

두 커밋 이전 상태로 돌려주시겠어요?

→ `git reset --hard HEAD~2`

latest 브랜치에서 빨리 고쳐야 하는 버그가 보이네요.

main에서 hotfix 브랜치 따서 개발해주시고 나중에 latest에 체리픽 해주세요.

1. **amend:  깜빡하고 수정 못한 파일이 있다. 방금 만든 커밋에 살짝 추가하고 싶다!**
    1. 코드 업데이트
    2. 기존 커밋에 amend 해서 커밋 수정 & push
    3. 커밋 메세지만 수정하기
    4. force push

1. **stash : 변경 사항을 잠시 킵해두고 싶어요, 아직 커밋은 안만들래요**

or 작업 하다 다른 브랜치로 이동해야 한다 → 왠만하면 working directory 다 비운 다음에 해야한다

→ commit, stash, reset을 통해서 깔끔하게 만든 상태에서 branch를 switch 하는 것 혹시 모를 conflict를 미연에 방지할 수 있다.

1. **reset : 옛날 커밋으로 브랜치를 되돌리고 싶어요**

준호님, 요구사항이 바뀌었어요ㅜㅜ 지금 만드신 `싫어요 버튼` 은 빼고 좋아요 버튼까지만 만들어 주세요

→ 옛날 코드로 리셋하자 (보통 모드는 hard : 모든 히스토리 날리면서 예전으로 돌아가기)

- mixed reset : 과거로 돌아가지만 커밋은 남겨 놓는다.
- 사용법 : `git reset [option] <commit_id>`

1. **revert : 이 커밋의 변경사항을 되돌리고 싶어요**

앗, main에 잘못된 커밋 올려버렸다.. reset하고 force push 하면 다른 사람들 히스토리에 영향을 주니 revert 하는 커밋을 새로 만들어야지..! (reset은 force push 해야함)

`git push --force` : 

- 이 명령어는 원격 저장소의 내용이 로컬 저장소의 내용과 일치하도록 원격 저장소의 변경사항들을 **강제로 덮어쓰게** 될 것이다.
- 주의: 이 명령어의 사용으로 인해 원격 저장소에 **커밋들이 유실되는 현상**이 발생할 수 있다.
- 해당 원격 저장소가 다른 사용자들과 공유되는 상황이라면 force push 를 수행하는 것은 더더욱 지양하여야 하는데, 이는 다른 사용자들의 git history 상에는 덮어쓰기가 수행된 커밋 정보가 포함되어 있을 수 있기에, 각 사용자들의 작업이 원격 저장소 내용과의 동기화가 끊어지게 만드는 결과가 초래되기 때문이다.

[force push 블로그](https://nochoco-lee.tistory.com/226)

1. “사이트 제목 삭제” 커밋 생성
2. 방금 만든 커밋 revert하는 새로운 커밋 생성 (source tree 명령은 reverse) 

→ 지난 커밋의 변경사항을 없애는 새로운 커밋이 생성되는 것을 확인할 수 있다.

- 사용법 : `git revert <commit_id>`

1. **cherry-pick : 저 커밋 하나만 떼서 지금 브랜치에 붙이고 싶어요!**
- A: 어제 릴리즈한 `latest` 브랜치에 버그가 있어!
    
    일단 `fix/test-bug`브랜치에서 버그를 고쳐서 `dev`에 머지했다..
    
- B: `main`에 다른 수정사항도 너무 많아서 `latest`랑 당장 머지할 수 없겠네요.. 그래도 릴리즈된 `latest` 브랜치에 버그 수정 커밋은 들어가야 해요!
- A:  그럼 제가 고친 코드가 있는 커밋을 latest에 똑 떼서 붙일게요! (체리픽)

`git cherry-pick <commit_id>`

**[Commit 메세지는 어떻게 적으면 좋을지]**

- **커밋메세지를 먼저 작성하고 작성해보기.**  → 어떤 단위로 커밋할지 알수 있고, 현재 무엇을 하는지 까먹지 않는다.
- 변경사항 자체를 깨끗하게 쪼개고, 이를 간략하게 적는다.
    - 퀴즈 받아오는 API 연동
    - 약관 동의 팝업 위치 변경
    - 카드 연결에서 Redux 제거
- 처음에는 코드 분 아니라 내 머릿속도 정리가 안되어 변경사항이 뒤죽박죽. 차근차근 정리하는 연습해야 한다!
- 선 커밋메세지 후 커밋도 유용!

**[유용한 PR 양식]**

- **주요 변경사항**
    - 이 PR이 해결하는 문제
- **링크**
    - 디자인 시안 링크 / 슬랙 관련 대화 링크
- **시급한 정도 → 지금은 별로 working하지 않아서 안해도 될 것 같음..**
    - 보통 : 최대한 빠르게 리뷰 부탁드립니다.
    - 긴급 : 선 Approve 후 리뷰 부탁드립니다. (리뷰는 추후 반영)
    - 천천히 : 급하지 않습니다.
- **중점적으로 봐주셨으면 하는 부분**
    - 변겅사항이 큰 경우 집중해야 할 부분, 또는 불안해서 봐주었으면 하는 부분 등